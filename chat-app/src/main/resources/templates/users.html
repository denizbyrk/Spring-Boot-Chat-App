<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ArkadaÅŸlar Bul</title>
    <link rel="stylesheet" href="/css/users-style.css">
</head>
<body>

<div class="container">

    <h2>ArkadaÅŸ Bul</h2>

    <div th:if="${message}" class="success-message">
        <p th:text="${message}"></p>
    </div>

    <!-- Arama Kutusu -->
    <form th:action="@{/users}" method="get" style="margin-bottom: 20px;">
        <input type="text" name="search" placeholder="KullanÄ±cÄ± ara..." th:value="${param.search}" />
        <button type="submit">Ara</button>
    </form>

    <!-- KullanÄ±cÄ± Listesi -->
    <div th:if="${users.isEmpty()}">
        <p>HiÃ§ kullanÄ±cÄ± bulunamadÄ±.</p>
    </div>

    <ul class="user-list" th:if="${!users.isEmpty()}">
        <li th:each="user : ${users}">
            <span th:text="${user.username}">KullanÄ±cÄ±</span>

            <!-- EÄŸer zaten arkadaÅŸsa -->
            <p th:if="${friends.contains(user)}" style="color: green;">âœ” Zaten arkadaÅŸsÄ±nÄ±z</p>

            <!-- EÄŸer istek gÃ¶nderilmiÅŸse -->
            <p th:if="${pendingRequests.contains(user)}" style="color: orange;">ğŸ•“ Ä°stek gÃ¶nderildi</p>

            <!-- EÄŸer ne arkadaÅŸ ne de istek varsa, buton gÃ¶ster -->
            <form th:if="${!friends.contains(user)} and !${pendingRequests.contains(user)}"
                  th:action="@{/friends/request}" method="post" style="display: inline;">
                <input type="hidden" name="toUsername" th:value="${user.username}" />
                <button type="submit" class="friend-request-button">ArkadaÅŸlÄ±k Ä°steÄŸi GÃ¶nder</button>
            </form>
        </li>
    </ul>

    <!-- Navigasyon butonlarÄ± -->
    <div class="navigation-buttons">
        <a href="/friends/list" class="nav-button">ArkadaÅŸlarÄ±m</a>
        <a href="/friends/pending" class="nav-button">Bekleyen Ä°steklerim</a>
    </div>

    <!-- Ã‡Ä±kÄ±ÅŸ Yap -->
    <form th:action="@{/logout}" method="post" style="margin-top: 30px;">
        <button type="submit" class="logout-button">Ã‡Ä±kÄ±ÅŸ Yap</button>
    </form>

</div>

</body>
</html>
